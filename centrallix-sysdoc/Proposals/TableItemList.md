# Table Widget ItemList Column Type

Author:	Greg Beeley

Date:	February 3, 2026

## Overview

An increasingly common need regarding the Centrallix Table widget is to display a list of items within a cell.  This could a list of tasks to be accomplished, a list of steps taken in an engagement, a list of recent gifts or months in which gifts happened, etc.

This document describes a new Table widget "itemlist" column type to facilitate this type of display without having to use less efficient or less user friendly techniques such as SVG images or unstructured text.

## Need Assessment

The display of multiple items within a table cell could include the following:

1. A simple horizontal or vertical list of numbers, words, or phrases.

2. A two dimensional list where items will need to flow into multiple rows.

3. In some instances, a two dimensional display will keep items in a grid; in other cases item and row sizes need not be identical.

4. Items may have a fixed width and height, or may be variable in one or more of those dimensions depending on the content.

5. Items will most commonly be text, but may also be images.

6. Items will need to be stylable in the same way as a table row or cell, with border, roundness, padding, margin, background, colors, and shadow.

7. Items will need to be generated by a SQL command.  One option is embedding this data in the objectsource's SQL result set; another is having the table issue commands directly.  The former offers better performance and is more compatible with coming security changes, but will involve parsing data from a single result set field.

8. Items will need to be displayed for all visible rows.  Unlike a table row detail widget, which is only shown for the selected row and thus can exist as just one widget, the display will need to be multiplex.

9. Items will need some ability to be dragged and dropped, thus a need for drag/drop move events if an item is dragged to another row or column.

## Design Decisions

1. For the initial implementation, and for simplicity, we'll go with the data embedding in the result set approach.  A separator character will be specified via the `item_separator` property, and the result set field can use the `escape()` function to manage any separator characters occurring within the item strings.  The JavaScript code will be designed to be compatible with the behavior of `escape()`.

2. A set of properties on the table cell, prefixed by `item`, will provide the formatting options for the items in the list.  The formatting will be done with the `htr_stylize_element()` function in JavaScript.

3. Items can have an `item_width` and `item_height` property, which if unset leaves them flexible/automatic, but if set causes the item geometry to be fixed the respective dimension.  With fixed geometry, the item's text may be clipped if too long.

4. Table cells will have new DragStart, DragDrop, and DragCancel events to handle drag and drop of items.  DragStart will identify the item and (x,y) click offset.  DragDrop will identify the source item, the row and cell where the drop happened, and the item before and item after the drop location (if any).  DragCancel will happen if the user releases the item in an unsuitable location, and will specify the source item.

5. An `item_type` property will indicate whether an item is `text` (default) or `image`.  For image types, the image URL should be in the item's string.

6. In this initial implementation, items will be laid out horizontally, then vertically after wrapping.

7. A new event ClickItem will indicate when an item is clicked or tapped.

8. In this initial implementation, item style properties can be dependent on the row's data values, but not on anything about the item itself.

9. A property, `item_source`, will default to `field` to indicate the data is being retrieved from a table objectsource field rather than independently via SQL, as may be possible in the future.  No other values other than `field` will be supported for this attribute, and the attribute can be left unset (default).  In the future, this default behavior will continue.

10. Items will be drawn as inline block DIVs.

11. The text value for items can include newlines as line breaks.  No other formatting will be allowed in this initial implementation.  If `item_wrap` is enabled (not `no`), text can also wrap to new lines.

12. An `item_spacing` property will provide the horizontal and vertical spacing between items.

## Future Directions

1. Support for `item_source = 'sql'` and `item_sql` to specify the SQL code to retrieve the item.  When we move OSRC / view model / SQL origination to the server side, this will be handled on the server and delivered to the client as an array of items.  This will also enable support for an item's styling being dependent on item-specific properties, rather than just general or row-specific properties.

2. Support for formatting within an item.

3. Animations when dragging/dropping items beyond just showing the item being moved.

4. Support for more advanced item layout controls.
